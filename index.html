<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Magnetic Disk + Flower of Life</title>
  <style> body { margin:0; overflow:hidden; } canvas { display:block; } </style>
</head>
<body>
<script type="module">
  import * as THREE from 'https://unpkg.com/three/build/three.module.js';
  import { OrbitControls } from 'https://unpkg.com/three/examples/jsm/controls/OrbitControls.js';

  const scene = new THREE.Scene();
  scene.background = new THREE.Color(0x000000);
  const camera = new THREE.PerspectiveCamera(45, innerWidth/innerHeight, 0.1, 1000);
  camera.position.set(0,5,10);
  const renderer = new THREE.WebGLRenderer({antialias:true});
  renderer.setSize(innerWidth, innerHeight);
  document.body.appendChild(renderer.domElement);

  const controls = new OrbitControls(camera, renderer.domElement);

  // Disk
  const disk = new THREE.Mesh(
    new THREE.CylinderGeometry(2,2,0.3,64),
    new THREE.MeshStandardMaterial({ color:0x3333ff, metalness:0.6, roughness:0.2, transparent:true, opacity:0.8 })
  );
  scene.add(disk);

  // Field lines
  const fieldLines = new THREE.Group();
  const mat = new THREE.LineBasicMaterial({color:0x00ffff, linewidth:1});
  function mkField(rad,h) {
    for(let a=0;a<Math.PI*2;a+=Math.PI/16){
      const pts = [];
      for(let i=0;i<=100;i++){
        const t=i/100, theta = t*Math.PI, r = rad*Math.sin(theta);
        pts.push(new THREE.Vector3(r*Math.cos(a), h*(1-2*t), r*Math.sin(a)));
      }
      const curve = new THREE.CatmullRomCurve3(pts);
      fieldLines.add(new THREE.Line(new THREE.BufferGeometry().setFromPoints(curve.getPoints(200)), mat));
    }
  }
  mkField(3.5,3);
  scene.add(fieldLines);

  // Flower of Life overlay
  const flor = new THREE.Group();
  const circles = 8;
  const step = Math.PI*2/circles;
  const center = new THREE.Vector3(0, 0.16, 0);
  const radius = 1;
  for(let i=0;i<circles;i++){
    const ring = new THREE.LineLoop(
      new THREE.CircleGeometry(radius, 64),
      new THREE.MeshBasicMaterial({color:0xffcc00, transparent:true, opacity:0.5})
    );
    ring.rotation.x = Math.PI/2;
    ring.position.copy(center.clone().applyAxisAngle(new THREE.Vector3(0,1,0), i*step));
    flor.add(ring);
  }
  // Add overlapping rings for deeper pattern
  flor.children.forEach(r=>r.clone() && flor.add(r.clone().rotateOnAxis(new THREE.Vector3(0,1,0),step/2)));
  scene.add(flor);

  // Lights
  scene.add(new THREE.AmbientLight(0x404040));
  const p = new THREE.PointLight(0xffffff,1);
  p.position.set(5,5,5);
  scene.add(p);

  window.addEventListener('resize', ()=>{
    camera.aspect = innerWidth/innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(innerWidth, innerHeight);
  });

  function animate(){
    requestAnimationFrame(animate);
    renderer.render(scene, camera);
    controls.update();
  }
  animate();
</script>
</body>
</html>
